<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GockLine</title>

<style>
:root{
  --bg:#14162a;
  --panel:#1c1f3a;
  --panel2:#242861;
  --accent:#7b8cff;
  --accent2:#c77dff;
  --danger:#ff5c5c;
  --text:#fff;
  --muted:#9aa3b2;
}

*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Roboto}
body{margin:0;background:var(--bg);color:var(--text);height:100vh;overflow:hidden}

/* ===== COMMON ===== */
button{
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border:none;border-radius:12px;
  padding:10px 14px;color:#fff;font-weight:600
}
.hidden{display:none}

/* ===== LOGIN ===== */
#login{
  height:100vh;display:flex;flex-direction:column;
  justify-content:center;padding:20px
}
#login input{
  padding:14px;border-radius:12px;border:none;
  margin-bottom:12px;background:var(--panel2);color:#fff
}
#login a{color:var(--accent);text-align:center}

/* ===== MAIN ===== */
#app{display:none;height:100vh}
header{
  padding:12px;background:var(--panel);
  display:flex;gap:8px;align-items:center
}
header input{
  flex:1;padding:10px;border-radius:10px;
  border:none;background:var(--panel2);color:#fff
}
#chatList{overflow:auto;height:calc(100vh - 60px)}
.chatItem{
  padding:16px;border-bottom:1px solid #2a2e5a;
}
.chatItem small{color:var(--muted)}

/* ===== CHAT ===== */
#chat{display:none;flex-direction:column;height:100vh}
#chatHeader{
  background:var(--panel);padding:12px;
  display:flex;align-items:center;justify-content:space-between
}
#messages{flex:1;padding:12px;overflow:auto}

/* ===== MESSAGE ===== */
.msg{
  max-width:75%;background:var(--panel2);
  padding:10px 12px;border-radius:14px;
  margin-bottom:10px;position:relative;
  word-wrap:break-word
}
.me{margin-left:auto;background:#3b4ee0}
.time{font-size:10px;opacity:.6;text-align:right}

/* ===== REPLY ===== */
.replyBox{
  background:#1a1d3a;border-left:3px solid var(--accent);
  padding:6px;font-size:12px;margin-bottom:4px
}

/* ===== MSG MENU ===== */
.msgMenu{
  position:absolute;top:-6px;right:0;
  background:#000c;border-radius:10px;z-index:20
}
.msgMenu div{
  padding:8px 12px;border-bottom:1px solid #333
}
.msgMenu div:last-child{border:none}

/* ===== INPUT ===== */
#inputBar{
  display:flex;padding:10px;background:var(--panel);gap:6px
}
#inputBar input{
  flex:1;padding:10px;border-radius:10px;
  border:none;background:var(--panel2);color:#fff
}

/* ===== GIFTS ===== */
.giftBox{
  width:180px;height:180px;margin:16px auto;
  border-radius:24px;
  background:linear-gradient(135deg,#6b6fff,#c77dff);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  font-size:48px;animation:pulse 1.4s infinite
}
.giftBox span{font-size:12px;margin-top:6px}

/* ===== INVENTORY ===== */
#inventory{
  position:fixed;bottom:0;left:0;right:0;
  background:var(--panel);
  max-height:60vh;overflow:auto;display:none
}
.invItem{
  display:flex;justify-content:space-between;
  padding:14px;border-bottom:1px solid #2a2e5a
}

/* ===== PROFILE ===== */
#profile{display:none;height:100vh;padding:20px}
.avatar{
  width:100px;height:100px;border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  margin:0 auto 12px
}
.profile input,textarea{
  width:100%;padding:10px;margin-bottom:10px;
  border:none;border-radius:10px;
  background:var(--panel2);color:#fff
}

/* ===== ADMIN ===== */
#admin{display:none;padding:20px}

/* ===== ANIM ===== */
@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.06)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <h2>GockLine</h2>
  <input id="tokenInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω">
  <button onclick="enter()">–í–æ–π—Ç–∏</button>
  <a href="https://t.me/gock_registration_bot" target="_blank">
    –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ Telegram
  </a>
</div>

<!-- MAIN -->
<div id="app">
  <header>
    <input placeholder="–ü–æ–∏—Å–∫">
    <button onclick="openProfile()">üë§</button>
    <button onclick="openAdmin()">üõ†</button>
  </header>

  <div id="chatList">
    <div class="chatItem" onclick="openChat('–ú–∞—Ä–∫–µ—Ç')">
      üõí –ú–∞—Ä–∫–µ—Ç<br><small>Gock AI / –ø–æ–¥–∞—Ä–∫–∏</small>
    </div>
    <div class="chatItem" onclick="openChat('@test')">
      @test ‚úî<br><small>–û–Ω–ª–∞–π–Ω</small>
    </div>
  </div>
</div>

<!-- CHAT -->
<div id="chat">
  <div id="chatHeader">
    <button onclick="backMain()">‚Üê</button>
    <span id="chatTitle"></span>
    <button onclick="toggleChatMenu()">‚ãÆ</button>
  </div>

  <div id="messages"></div>

  <div id="inputBar">
    <button onclick="toggleInv()">üéÅ</button>
    <input id="text">
    <button onclick="sendText()">‚û§</button>
  </div>
</div>

<!-- INVENTORY -->
<div id="inventory"></div>

<!-- PROFILE -->
<div id="profile">
  <button onclick="backMain()">‚Üê</button>
  <div class="avatar"></div>
  <input id="username" placeholder="@username">
  <input placeholder="–ù–∏–∫">
  <textarea placeholder="Bio"></textarea>
  <small>ID –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è</small><br><br>
  <button onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<!-- ADMIN -->
<div id="admin">
  <button onclick="backMain()">‚Üê</button>
  <h3>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
  <p>–ñ–∞–ª–æ–±—ã / –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ / —Ä–æ–ª–∏ (—á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä)</p>
</div>

<script>
let replyTo=null;
let inventoryData={"üéÇ":2,"üöÄ":2,"üèÜ":1,"üíé":1,"‚ù§Ô∏è":3};

/* LOGIN */
function enter(){
  login.style.display='none';
  app.style.display='block';
}

/* NAV */
function openChat(n){
  closeAll();
  chat.style.display='flex';
  chatTitle.innerText=n;
}
function backMain(){ closeAll(); app.style.display='block'; }
function openProfile(){ closeAll(); profile.style.display='block'; }
function openAdmin(){ closeAll(); admin.style.display='block'; }
function closeAll(){
  chat.style.display='none';
  profile.style.display='none';
  admin.style.display='none';
  inventory.style.display='none';
}

/* TIME */
function time(){
  const d=new Date();
  return d.getHours().toString().padStart(2,'0')+':'+
         d.getMinutes().toString().padStart(2,'0');
}

/* SEND MESSAGE */
function sendText(){
  if(!text.value)return;
  const m=document.createElement('div');
  m.className='msg me';

  if(replyTo){
    m.innerHTML+=`<div class="replyBox">${replyTo}</div>`;
    replyTo=null;
  }

  const span=document.createElement('span');
  span.textContent=text.value;
  m.appendChild(span);

  m.innerHTML+=`<div class="time">${time()}</div>`;
  m.ondblclick=()=>openMsgMenu(m);
  messages.appendChild(m);
  text.value='';
}

/* MSG MENU */
function openMsgMenu(m){
  closeMsgMenus();
  const menu=document.createElement('div');
  menu.className='msgMenu';
  menu.innerHTML=`
    <div onclick="replyMsg('${m.innerText.split('\n')[0]}')">‚Ü© –û—Ç–≤–µ—Ç–∏—Ç—å</div>
    <div onclick="editMsg(this)">‚úè –ò–∑–º–µ–Ω–∏—Ç—å</div>
    <div onclick="deleteMsg(this)">üóë –£–¥–∞–ª–∏—Ç—å</div>`;
  m.appendChild(menu);
}
function closeMsgMenus(){
  document.querySelectorAll('.msgMenu').forEach(m=>m.remove());
}
function replyMsg(t){ replyTo=t; closeMsgMenus(); }
function editMsg(el){
  const msg=el.closest('.msg').querySelector('span');
  const n=prompt('–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',msg.textContent);
  if(n!==null) msg.textContent=n;
  closeMsgMenus();
}
function deleteMsg(el){ el.closest('.msg').remove(); }

/* INVENTORY */
function toggleInv(){
  inventory.innerHTML='';
  for(let g in inventoryData){
    if(inventoryData[g]>0){
      const d=document.createElement('div');
      d.className='invItem';
      d.innerHTML=`<span>${g} (${inventoryData[g]})</span>
      <button onclick="sendGift('${g}')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>`;
      inventory.appendChild(d);
    }
  }
  inventory.style.display='block';
}
function sendGift(g){
  inventoryData[g]--;
  inventory.style.display='none';
  const box=document.createElement('div');
  box.className='giftBox';
  box.innerHTML=`${g}<span>–ü–æ–¥–∞—Ä–æ–∫</span>`;
  messages.appendChild(box);
}

/* PROFILE */
function saveProfile(){
  if(!username.value.startsWith('@')){
    alert('Username –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å @');
    return;
  }
  alert('–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω (—á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä)');
}
</script>

</body>
</html>
